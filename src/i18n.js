import { useState, useEffect } from "react";


export const LANGS = [
  { code: "he", name: "×¢×‘×¨×™×ª", dir: "rtl", locale: "he-IL" },
  { code: "en", name: "English", dir: "ltr", locale: "en-US" },
  { code: "fr", name: "FranÃ§ais", dir: "ltr", locale: "fr-FR" },
  { code: "ru", name: "Ð ÑƒÑÑÐºÐ¸Ð¹", dir: "ltr", locale: "ru-RU" },
  { code: "es", name: "EspaÃ±ol", dir: "ltr", locale: "es-ES" },
];

export const STR = {
  he: {
    appTitle: "×—×¤×© ××ª ×”×™×¢×“ ×œ×˜×™×•×œ ×”×ž×•×©×œ× ×©×œ×›×..",
    placeholder: "×œ×ž×©×œ: ×¨×•×ž×, ×¤×¨×™×–, ×ª×œ ××‘×™×‘",
    search: "×—×™×¤×•×©",
    loading: "×˜×•×¢×Ÿ × ×ª×•× ×™× ...",
    error: "×©×’×™××”",
    capital: "×‘×™×¨×”",
    currency: "×ž×˜×‘×¢",
    languages: "×©×¤×•×ª",
    localTime: "×©×¢×” ×‘×™×¢×“",
    currentWeather: "×ž×–×’ ××•×•×™×¨ × ×•×›×—×™",
    wind: "×¨×•×—",
    kph: "×§×ž×´×©",
    attractions: "××˜×¨×§×¦×™×•×ª ×‘×™×¢×“",
    loadingAttractions: "×˜×•×¢×Ÿ ××˜×¨×§×¦×™×•×ªâ€¦",
    noAttractions: "××™×Ÿ ××˜×¨×§×¦×™×•×ª ×œ×”×¦×’×” ×¢×“×™×™×Ÿ.",
    shabbatHeader: "ðŸ•¯ï¸ ×–×ž× ×™ ×”×“×œ×§×ª × ×¨×•×ª",
    entryShabbat: "×›× ×™×¡×ª ×©×‘×ª",
    exitShabbat: "×™×¦×™××ª ×©×‘×ª",
    entryHoliday: "×›× ×™×¡×ª ×—×’",
    exitHoliday: "×¦××ª ×—×’",
    tz: "××–×•×¨ ×–×ž×Ÿ",
    noEvent: "××™×Ÿ ××™×¨×•×¢ ×§×¨×•×‘ ×œ×©×‘×•×¢ ×”×§×¨×•×‘.",
    builtWith: (y) => `× ×‘× ×” ×‘- React + Vite âœ¨Â· ${y} Â· ×¢×œ ×™×“×™ ×˜×œ×™×” ×•×›×˜×¨`,
    bsd: "×‘×¡×´×“",
    cityCountrySep: ", ",
    langLabel: "×©×¤×”",
    map: "×ž×¤×” ×‘×™×¢×“",
    landingTitle: "××™×š ×ª×¨×¦×• ×œ×˜×™×™×œ ×”×™×•×?",
    landingSubtitle:"TripGo ×”×•× ×”×‘×™×ª ×”×“×™×’×™×˜×œ×™ ×©×œ ×”×˜×™×•×œ ×”×‘× ×©×œ×›× â€“ ×‘× ×™×™×ª ×ž×¡×œ×•×œ ×—×›×, ×ž×¦×™××ª ××˜×¨×§×¦×™×•×ª ×ž×•×©×œ×ž×•×ª ×•×”×ª××ž×” ××™×©×™×ª ×œ×¡×’× ×•×Ÿ ×”×˜×™×•×œ ×©×œ×›×, ×‘×ž×§×•× ××—×“ × ×•×— ×•×‘×¨×•×¨.",
    landingPlannerBtn: "×‘× ×™×™×ª ×ž×¡×œ×•×œ",
    landingExplorerBtn: "×¤×¨×˜×™× ×¢×œ ×”×™×¢×“",
    backToLanding: "×—×–×¨×” ×œ×¢×ž×•×“ ×”×¨××©×™",
    mapHintLine1: "×’×œ×™×œ×” ×©×•×œ×˜×ª ×‘×“×£ ðŸ”½",
    mapHintLine2: "×œ×—×¦×™ ×›×“×™ ×œ×”×¤×¢×™×œ ××ª ×”×ž×¤×”",
  },
  en: {
    appTitle: "Find your perfect trip destination..",
    placeholder: "e.g., Rome, Paris, Tel Aviv",
    search: "Search",
    loading: "Loading data ...",
    error: "Error",
    capital: "Capital",
    currency: "Currency",
    languages: "Languages",
    localTime: "Local time",
    currentWeather: "Current weather",
    wind: "Wind",
    kph: "km/h",
    attractions: "Attractions",
    loadingAttractions: "Loading attractionsâ€¦",
    noAttractions: "No attractions to show yet.",
    shabbatHeader: "ðŸ•¯ï¸ Candle Lighting Times",
    entryShabbat: "Candle lighting",
    exitShabbat: "Havdalah",
    entryHoliday: "Holiday begins",
    exitHoliday: "Holiday ends",
    tz: "Time zone",
    noEvent: "No upcoming event this week.",
    builtWith: (y) => `Built with React + Vite âœ¨Â· ${y} Â· by Talia Wachter`,
    bsd: "×‘×¡" + "\u05f3" + "×“",
    cityCountrySep: ", ",
    langLabel: "Language",
    map: "Map of destination",
    landingTitle: "How would you like to travel today?",
    landingSubtitle: "TripGo is your digital home for your next trip â€“ smart route planning, discovering the best attractions, and personalizing your travel experience, all in one simple and intuitive place.",
    landingPlannerBtn: "Trip planner",
    landingExplorerBtn: "Destination info",
    backToLanding: "Back to home",
    mapHintLine1: "Scroll moves the page ðŸ”½",
    mapHintLine2: "Click to activate the map",
  },
  fr: {
    appTitle: "Trouvez votre destination idÃ©ale..",
    placeholder: "ex.: Rome, Paris, Tel-Aviv",
    search: "Rechercher",
    loading: "Chargement ...",
    error: "Erreur",
    capital: "Capitale",
    currency: "Devise",
    languages: "Langues",
    localTime: "Heure locale",
    currentWeather: "MÃ©tÃ©o actuelle",
    wind: "Vent",
    kph: "km/h",
    attractions: "Attractions",
    loadingAttractions: "Chargement des attractionsâ€¦",
    noAttractions: "Aucune attraction Ã  afficher pour le moment.",
    shabbatHeader: "ðŸ•¯ï¸ Horaires des bougies",
    entryShabbat: "Allumage",
    exitShabbat: "Fin (Havdalah)",
    entryHoliday: "DÃ©but de la fÃªte",
    exitHoliday: "Fin de la fÃªte",
    tz: "Fuseau horaire",
    noEvent: "Aucun Ã©vÃ©nement Ã  venir cette semaine.",
    builtWith: (y) => `Construit avec React + Vite âœ¨Â· ${y} Â· par Talia Wachter`,
    bsd: "×‘×¡×´×“",
    cityCountrySep: ", ",
    langLabel: "Langue",
    map: "Carte de la destination",
    landingTitle: "Comment souhaitez-vous voyager aujourdâ€™hui ?",
    landingSubtitle: "TripGo est votre espace numÃ©rique pour votre prochain voyage planification intelligente - dâ€™itinÃ©raires, dÃ©couverte des meilleures attractions et personnalisation de votre expÃ©rience de voyage, le tout en un seul endroit simple et intuitif.",
    landingPlannerBtn: "Planificateur de voyage",
    landingExplorerBtn: "Informations sur la destination",
    backToLanding: "Retour Ã  lâ€™accueil",
    mapHintLine1: "Le dÃ©filement contrÃ´le la page ðŸ”½",
    mapHintLine2: "Cliquez pour activer la carte",
  },
  ru: {
    appTitle: "ÐÐ°Ð¹Ð´Ð¸Ñ‚Ðµ Ð¸Ð´ÐµÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð¿Ð¾ÐµÐ·Ð´ÐºÐ¸..",
    placeholder: "Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: Ð Ð¸Ð¼, ÐŸÐ°Ñ€Ð¸Ð¶, Ð¢ÐµÐ»ÑŒ-ÐÐ²Ð¸Ð²",
    search: "ÐŸÐ¾Ð¸ÑÐº",
    loading: "Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ… ...",
    error: "ÐžÑˆÐ¸Ð±ÐºÐ°",
    capital: "Ð¡Ñ‚Ð¾Ð»Ð¸Ñ†Ð°",
    currency: "Ð’Ð°Ð»ÑŽÑ‚Ð°",
    languages: "Ð¯Ð·Ñ‹ÐºÐ¸",
    localTime: "ÐœÐµÑÑ‚Ð½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ",
    currentWeather: "ÐŸÐ¾Ð³Ð¾Ð´Ð° ÑÐµÐ¹Ñ‡Ð°Ñ",
    wind: "Ð’ÐµÑ‚ÐµÑ€",
    kph: "ÐºÐ¼/Ñ‡",
    attractions: "Ð”Ð¾ÑÑ‚Ð¾Ð¿Ñ€Ð¸Ð¼ÐµÑ‡Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸",
    loadingAttractions: "Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð´Ð¾ÑÑ‚Ð¾Ð¿Ñ€Ð¸Ð¼ÐµÑ‡Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÐµÐ¹â€¦",
    noAttractions: "ÐŸÐ¾ÐºÐ° Ð½ÐµÑ‚ Ð´Ð¾ÑÑ‚Ð¾Ð¿Ñ€Ð¸Ð¼ÐµÑ‡Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÐµÐ¹.",
    shabbatHeader: "ðŸ•¯ï¸ Ð’Ñ€ÐµÐ¼Ñ Ð·Ð°Ð¶Ð¸Ð³Ð°Ð½Ð¸Ñ ÑÐ²ÐµÑ‡ÐµÐ¹",
    entryShabbat: "Ð—Ð°Ð¶Ð¸Ð³Ð°Ð½Ð¸Ðµ ÑÐ²ÐµÑ‡ÐµÐ¹",
    exitShabbat: "Ð¥Ð°Ð²Ð´Ð°Ð»Ð°",
    entryHoliday: "ÐÐ°Ñ‡Ð°Ð»Ð¾ Ð¿Ñ€Ð°Ð·Ð´Ð½Ð¸ÐºÐ°",
    exitHoliday: "ÐšÐ¾Ð½ÐµÑ† Ð¿Ñ€Ð°Ð·Ð´Ð½Ð¸ÐºÐ°",
    tz: "Ð§Ð°ÑÐ¾Ð²Ð¾Ð¹ Ð¿Ð¾ÑÑ",
    noEvent: "ÐÐ° ÑÑ‚Ð¾Ð¹ Ð½ÐµÐ´ÐµÐ»Ðµ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ Ð½ÐµÑ‚.",
    builtWith: (y) => `Ð¡Ð´ÐµÐ»Ð°Ð½Ð¾ Ð½Ð° React + Vite âœ¨Â· ${y} Â· Talia Wachter`,
    bsd: "×‘×¡×´×“",
    cityCountrySep: ", ",
    langLabel: "Ð¯Ð·Ñ‹Ðº",
    map: "ÐšÐ°Ñ€Ñ‚Ð° Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ",
    landingTitle: "ÐšÐ°Ðº Ð²Ñ‹ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð¿ÑƒÑ‚ÐµÑˆÐµÑÑ‚Ð²Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐµÐ³Ð¾Ð´Ð½Ñ?",
    landingSubtitle: "TripGo Ð²Ð°Ñˆ Ñ†Ð¸Ñ„Ñ€Ð¾Ð²Ð¾Ð¹ Ð´Ð¾Ð¼ Ð´Ð»Ñ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ³Ð¾ Ð¿ÑƒÑ‚ÐµÑˆÐµÑÑ‚Ð²Ð¸Ñ - ÑƒÐ¼Ð½Ð¾Ðµ Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð°, Ð¿Ð¾Ð´Ð±Ð¾Ñ€ Ð»ÑƒÑ‡ÑˆÐ¸Ñ… Ð´Ð¾ÑÑ‚Ð¾Ð¿Ñ€Ð¸Ð¼ÐµÑ‡Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÐµÐ¹ Ð¸ Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¿Ð¾ÐµÐ·Ð´ÐºÐ¸ Ð²ÑÑ‘ Ð² Ð¾Ð´Ð½Ð¾Ð¼ ÑƒÐ´Ð¾Ð±Ð½Ð¾Ð¼ Ð¼ÐµÑÑ‚Ðµ.",
    landingPlannerBtn: "ÐŸÐ»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ñ‰Ð¸Ðº Ð¿ÑƒÑ‚ÐµÑˆÐµÑÑ‚Ð²Ð¸Ñ",
    landingExplorerBtn: "Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð¼ÐµÑÑ‚Ðµ Ð½Ð°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ",
    backToLanding: "Ð’ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ Ð½Ð° Ð³Ð»Ð°Ð²Ð½ÑƒÑŽ",
    mapHintLine1: "ÐŸÑ€Ð¾ÐºÑ€ÑƒÑ‚ÐºÐ° ÑƒÐ¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†ÐµÐ¹ ðŸ”½",
    mapHintLine2: "ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð°ÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ°Ñ€Ñ‚Ñƒ",
  },
  es: {
    appTitle: "Encuentra tu destino perfecto..",
    placeholder: "p. ej., Roma, ParÃ­s, Tel Aviv",
    search: "Buscar",
    loading: "Cargando datos ...",
    error: "Error",
    capital: "Capital",
    currency: "Moneda",
    languages: "Idiomas",
    localTime: "Hora local",
    currentWeather: "Clima actual",
    wind: "Viento",
    kph: "km/h",
    attractions: "Atracciones",
    loadingAttractions: "Cargando atraccionesâ€¦",
    noAttractions: "AÃºn no hay atracciones para mostrar.",
    shabbatHeader: "ðŸ•¯ï¸ Horarios de velas",
    entryShabbat: "Encendido de velas",
    exitShabbat: "HavdalÃ¡",
    entryHoliday: "Comienzo de la festividad",
    exitHoliday: "Fin de la festividad",
    tz: "Zona horaria",
    noEvent: "No hay eventos esta semana.",
    builtWith: (y) => `Hecho con React + Vite âœ¨Â· ${y} Â· por Talia Wachter`,
    bsd: "×‘×¡×´×“",
    cityCountrySep: ", ",
    langLabel: "Idioma",
    map: "Mapa del destino",
    landingTitle: "CÃ³mo te gustarÃ­a viajar hoy?",
    landingSubtitle: "TripGo es tu hogar digital para tu prÃ³ximo viaje - planificaciÃ³n inteligente del recorrido, descubrimiento de las mejores atracciones y una experiencia de viaje personalizada, todo en un solo lugar sencillo e intuitivo.",
    landingPlannerBtn: "Planificador de viaje",
    landingExplorerBtn: "InformaciÃ³n del destino",
    backToLanding: "Volver al inicio",
    mapHintLine1: "El desplazamiento mueve la pÃ¡gina ðŸ”½",
    mapHintLine2: "Haz clic para activar el mapa",
  },
};


// ×§×•×“×™ ×ž×–"× ×ž×ª×•×¨×’×ž×™× (×—×œ×§×™)
const WX_MAP = {
  he: {
    0: "×©×ž×™×™× × ×§×™×™×",
    1: "×‘×¢×™×§×¨ ×‘×”×™×¨",
    2: "×ž×¢×•× ×Ÿ ×—×œ×§×™×ª",
    3: "×ž×¢×•× ×Ÿ",
    45: "×¢×¨×¤×œ",
    48: "×¢×¨×¤×œ ×›×¤×•×¨",
    51: "×˜×¤×˜×•×£ ×§×œ",
    53: "×˜×¤×˜×•×£ ×‘×™× ×•× ×™",
    55: "×˜×¤×˜×•×£ ×—×–×§",
    61: "×’×©× ×§×œ",
    63: "×’×©× ×‘×™× ×•× ×™",
    65: "×’×©× ×—×–×§",
    80: "×ž×ž×˜×¨×™× ×§×œ×™×",
    81: "×ž×ž×˜×¨×™× ×‘×™× ×•× ×™×™×",
    82: "×ž×ž×˜×¨×™× ×—×–×§×™×",
    95: "×¡×•×¤×ª ×¨×¢×ž×™×",
  },
  en: {
    0: "Clear sky",
    1: "Mostly clear",
    2: "Partly cloudy",
    3: "Cloudy",
    45: "Fog",
    48: "Freezing fog",
    51: "Light drizzle",
    53: "Moderate drizzle",
    55: "Heavy drizzle",
    61: "Light rain",
    63: "Moderate rain",
    65: "Heavy rain",
    80: "Light showers",
    81: "Moderate showers",
    82: "Heavy showers",
    95: "Thunderstorm",
  },
};


function getLangConf(code) {
  return LANGS.find((l) => l.code === code) || LANGS[0];
}

export function useI18n() {
  const [lang, setLang] = useState(() => localStorage.getItem("lang") || "he");
  const conf = getLangConf(lang);
  useEffect(() => {
    localStorage.setItem("lang", lang);
  }, [lang]);

  function t(key) {
    const pack = STR[lang] || STR.en;
    const val = pack?.[key];
    if (typeof val === "function") return val;
    return val ?? STR.en[key] ?? key;
  }

  function wx(code) {
    const table = WX_MAP[lang] || WX_MAP.en || {};
    return table?.[code] || (code != null ? `Code ${code}` : "â€”");
  }

  return { lang, setLang, conf, t, wx };
}
